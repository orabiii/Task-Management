import{S as pn,i as mn,s as yn,C as br,k as K,a as F,l as O,m as C,c as q,h as E,n as f,b as Ze,G as g,J as pe,K as bs,L as _s,D as _r,E as wr,F as kr,g as Be,d as Le,M as gn,N as ws,w as Mt,O as Rr,P as J,q as ce,y as vn,Q as $,r as he,z as bn,R as nn,A as _n,T as Nr,u as Vt,U as Fr,B as wn,V as ye,f as qr,I as ks,e as rn,v as Vr,W as xs,X as Es}from"../chunks/index.49860e70.js";import{H as Ps}from"../chunks/control.e7f5239e.js";const ee=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ae=Object.keys,ve=Array.isArray;function ke(t,e){return typeof e!="object"||ae(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||ee.Promise||(ee.Promise=Promise);const yt=Object.getPrototypeOf,Ds={}.hasOwnProperty;function Ie(t,e){return Ds.call(t,e)}function gt(t,e){typeof e=="function"&&(e=e(yt(t))),(typeof Reflect>"u"?ae:Reflect.ownKeys)(e).forEach(n=>{Ue(t,n,e[n])})}const Lr=Object.defineProperty;function Ue(t,e,n,r){Lr(t,e,ke(n&&Ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ft(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ue(t.prototype,"constructor",t),{extend:gt.bind(null,t.prototype)}}}}const Cs=Object.getOwnPropertyDescriptor;function Jn(t,e){let n;return Cs(t,e)||(n=yt(t))&&Jn(n,e)}const Is=[].slice;function sn(t,e,n){return Is.call(t,e,n)}function Ur(t,e){return e(t)}function Et(t){if(!t)throw new Error("Assertion Failed")}function Hr(t){ee.setImmediate?setImmediate(t):setTimeout(t,0)}function Yr(t,e){return t.reduce((n,r,s)=>{var o=e(r,s);return o&&(n[o[0]]=o[1]),n},{})}function He(t,e){if(Ie(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var o=He(t,e[r]);n.push(o)}return n}var i=e.indexOf(".");if(i!==-1){var l=t[e.substr(0,i)];return l===void 0?void 0:He(l,e.substr(i+1))}}function Ce(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Et(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)Ce(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var i=e.substr(0,o),l=e.substr(o+1);if(l==="")n===void 0?ve(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=n;else{var a=t[i];a&&Ie(t,i)||(a=t[i]={}),Ce(a,l,n)}}else n===void 0?ve(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function zr(t){var e={};for(var n in t)Ie(t,n)&&(e[n]=t[n]);return e}const js=[].concat;function Wr(t){return js.apply([],t)}const Gr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Wr([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>ee[t]),Ks=Gr.map(t=>ee[t]);Yr(Gr,t=>[t,!0]);let Qe=null;function Rt(t){Qe=typeof WeakMap<"u"&&new WeakMap;const e=In(t);return Qe=null,e}function In(t){if(!t||typeof t!="object")return t;let e=Qe&&Qe.get(t);if(e)return e;if(ve(t)){e=[],Qe&&Qe.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(In(t[n]))}else if(Ks.indexOf(t.constructor)>=0)e=t;else{const o=yt(t);for(var s in e=o===Object.prototype?{}:Object.create(o),Qe&&Qe.set(t,e),t)Ie(t,s)&&(e[s]=In(t[s]))}return e}const{toString:Os}={};function jn(t){return Os.call(t).slice(8,-1)}const Kn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ss=typeof Kn=="symbol"?function(t){var e;return t!=null&&(e=t[Kn])&&e.apply(t)}:function(){return null},ht={};function qe(t){var e,n,r,s;if(arguments.length===1){if(ve(t))return t.slice();if(this===ht&&typeof t=="string")return[t];if(s=Ss(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const $n=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qr(t,e){Me=t,Xr=e}var Xr=()=>!0;const As=!new Error("").stack;function lt(){if(As)try{throw lt.arguments,new Error}catch(t){return t}return new Error}function On(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Xr).map(r=>`
`+r).join("")):""}var Jr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Jr),Ts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pt(t,e){this._e=lt(),this.name=t,this.message=e}function $r(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function on(t,e,n,r){this._e=lt(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=$r(t,e)}function dt(t,e){this._e=lt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=$r(t,this.failures)}ft(pt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+On(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ft(on).from(pt),ft(dt).from(pt);var er=Zn.reduce((t,e)=>(t[e]=e+"Error",t),{});const Bs=pt;var M=Zn.reduce((t,e)=>{var n=e+"Error";function r(s,o){this._e=lt(),this.name=n,s?typeof s=="string"?(this.message=`${s}${o?`
 `+o:""}`,this.inner=o||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=Ts[e]||n,this.inner=null)}return ft(r).from(Bs),t[e]=r,t},{});M.Syntax=SyntaxError,M.Type=TypeError,M.Range=RangeError;var xr=Jr.reduce((t,e)=>(t[e+"Error"]=M[e],t),{}),Qt=Zn.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=M[e]),t),{});function X(){}function Kt(t){return t}function Ms(t,e){return t==null||t===Kt?e:function(n){return e(t(n))}}function it(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Rs(t,e){return t===X?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?it(r,this.onsuccess):r),s&&(this.onerror=this.onerror?it(s,this.onerror):s),o!==void 0?o:n}}function Ns(t,e){return t===X?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?it(n,this.onsuccess):n),r&&(this.onerror=this.onerror?it(r,this.onerror):r)}}function Fs(t,e){return t===X?e:function(n){var r=t.apply(this,arguments);ke(n,r);var s=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?it(s,this.onsuccess):s),o&&(this.onerror=this.onerror?it(o,this.onerror):o),r===void 0?i===void 0?void 0:i:ke(r,i)}}function qs(t,e){return t===X?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function tr(t,e){return t===X?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,o=new Array(s);s--;)o[s]=arguments[s];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}Qt.ModifyError=on,Qt.DexieError=pt,Qt.BulkError=dt;var Ot={};const[Sn,an,An]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,yt(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,yt(e),t]})(),Zr=an&&an.then,Xt=Sn&&Sn.constructor,nr=!!An;var Tn=!1,Vs=An?()=>{An.then(Lt)}:ee.setImmediate?setImmediate.bind(null,Lt):ee.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Lt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Lt,0)},Dt=function(t,e){Pt.push([t,e]),ln&&(Vs(),ln=!1)},Bn=!0,ln=!0,rt=[],Jt=[],Mn=null,Rn=Kt,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Pr(t[0],t[1])}catch{}})}},A=mt,Pt=[],st=0,$t=[];function S(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=X,this._lib=!1;var e=this._PSD=A;if(Me&&(this._stackHolder=lt(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ot)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Fn(this,this._value))}this._state=null,this._value=null,++e.ref,ts(this,t)}const Nn={get:function(){var t=A,e=un;function n(r,s){var o=!t.global&&(t!==A||e!==un);const i=o&&!Ye();var l=new S((a,c)=>{rr(this,new es(cn(r,t,o,i),cn(s,t,o,i),a,c,t))});return Me&&ss(l,this),l}return n.prototype=Ot,n},set:function(t){Ue(this,"then",t&&t.prototype===Ot?Nn:{get:function(){return t},set:Nn.set})}};function es(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function ts(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Nt();n&&typeof n.then=="function"?ts(t,(s,o)=>{n instanceof S?n._then(s,o):n.then(s,o)}):(t._state=!0,t._value=n,ns(t)),r&&Ft()}},Fn.bind(null,t))}catch(n){Fn(t,n)}}function Fn(t,e){if(Jt.push(e),t._state===null){var n=t._lib&&Nt();e=Rn(e),t._state=!1,t._value=e,Me&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,o){try{r.apply(null,o)}catch(i){s&&s(i)}}(()=>{var r=Jn(e,"stack");e._promise=t,Ue(e,"stack",{get:()=>Tn?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){rt.some(s=>s._value===r._value)||rt.push(r)}(t),ns(t),n&&Ft()}}function ns(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)rr(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),st===0&&(++st,Dt(()=>{--st==0&&sr()},[]))}function rr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++st,Dt(Ls,[n,t,e])}else t._listeners.push(e)}function Ls(t,e,n){try{Mn=e;var r,s=e._value;e._state?r=t(s):(Jt.length&&(Jt=[]),r=t(s),Jt.indexOf(s)===-1&&function(o){for(var i=rt.length;i;)if(rt[--i]._value===o._value)return void rt.splice(i,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{Mn=null,--st==0&&sr(),--n.psd.ref||n.psd.finalize()}}function rs(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,o,i=t._value;i!=null?(s=i.name||"Error",o=i.message||i,r=On(i,0)):(s=i,o=""),e.push(s+(o?": "+o:"")+r)}return Me&&((r=On(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&rs(t._prev,e,n)),e}function ss(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Lt(){Nt()&&Ft()}function Nt(){var t=Bn;return Bn=!1,ln=!1,t}function Ft(){var t,e,n;do for(;Pt.length>0;)for(t=Pt,Pt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Pt.length>0);Bn=!0,ln=!0}function sr(){var t=rt;rt=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=$t.slice(0),n=e.length;n;)e[--n]()}function Ut(t){return new S(Ot,!1,t)}function ne(t,e){var n=A;return function(){var r=Nt(),s=A;try{return Je(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Je(s,!1),r&&Ft()}}}gt(S.prototype,{then:Nn,_then:function(t,e){rr(this,new es(null,null,t,e,A))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ut(r)):this.then(null,r=>r&&r.name===e?n(r):Ut(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ut(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Tn=!0;var t=rs(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Tn=!1}}},timeout:function(t,e){return t<1/0?new S((n,r)=>{var s=setTimeout(()=>r(new M.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ue(S.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=os(),gt(S,{all:function(){var t=qe.apply(null,arguments).map(Ht);return new S(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,o)=>S.resolve(s).then(i=>{t[o]=i,--r||e(t)},n))})},resolve:t=>{if(t instanceof S)return t;if(t&&typeof t.then=="function")return new S((n,r)=>{t.then(n,r)});var e=new S(Ot,!0,t);return ss(e,Mn),e},reject:Ut,race:function(){var t=qe.apply(null,arguments).map(Ht);return new S((e,n)=>{t.map(r=>S.resolve(r).then(e,n))})},PSD:{get:()=>A,set:t=>A=t},totalEchoes:{get:()=>un},newPSD:Xe,usePSD:bt,scheduler:{get:()=>Dt,set:t=>{Dt=t}},rejectionMapper:{get:()=>Rn,set:t=>{Rn=t}},follow:(t,e)=>new S((n,r)=>Xe((s,o)=>{var i=A;i.unhandleds=[],i.onunhandled=o,i.finalize=it(function(){(function(l){function a(){l(),$t.splice($t.indexOf(a),1)}$t.push(a),++st,Dt(()=>{--st==0&&sr()},[])})(()=>{this.unhandleds.length===0?s():o(this.unhandleds[0])})},i.finalize),t()},e,n,r))}),Xt&&(Xt.allSettled&&Ue(S,"allSettled",function(){const t=qe.apply(null,arguments).map(Ht);return new S(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,o)=>S.resolve(s).then(i=>r[o]={status:"fulfilled",value:i},i=>r[o]={status:"rejected",reason:i}).then(()=>--n||e(r)))})}),Xt.any&&typeof AggregateError<"u"&&Ue(S,"any",function(){const t=qe.apply(null,arguments).map(Ht);return new S((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((o,i)=>S.resolve(o).then(l=>e(l),l=>{s[i]=l,--r||n(new AggregateError(s))}))})}));const ge={awaits:0,echoes:0,id:0};var Us=0,Zt=[],xn=0,un=0,Hs=0;function Xe(t,e,n,r){var s=A,o=Object.create(s);o.parent=s,o.ref=0,o.global=!1,o.id=++Hs;var i=mt.env;o.env=nr?{Promise:S,PromiseProp:{value:S,configurable:!0,writable:!0},all:S.all,race:S.race,allSettled:S.allSettled,any:S.any,resolve:S.resolve,reject:S.reject,nthen:Er(i.nthen,o),gthen:Er(i.gthen,o)}:{},e&&ke(o,e),++s.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=bt(o,t,n,r);return o.ref===0&&o.finalize(),l}function vt(){return ge.id||(ge.id=++Us),++ge.awaits,ge.echoes+=100,ge.id}function Ye(){return!!ge.awaits&&(--ge.awaits==0&&(ge.id=0),ge.echoes=100*ge.awaits,!0)}function Ht(t){return ge.echoes&&t&&t.constructor===Xt?(vt(),t.then(e=>(Ye(),e),e=>(Ye(),ue(e)))):t}function Ys(t){++un,ge.echoes&&--ge.echoes!=0||(ge.echoes=ge.id=0),Zt.push(A),Je(t,!0)}function zs(){var t=Zt[Zt.length-1];Zt.pop(),Je(t,!1)}function Je(t,e){var n=A;if((e?!ge.echoes||xn++&&t===A:!xn||--xn&&t===A)||is(e?Ys.bind(null,t):zs),t!==A&&(A=t,n===mt&&(mt.env=os()),nr)){var r=mt.env.Promise,s=t.env;an.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(ee,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function os(){var t=ee.Promise;return nr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ee,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:an.then,gthen:t.prototype.then}:{}}function bt(t,e,n,r,s){var o=A;try{return Je(t,!0),e(n,r,s)}finally{Je(o,!1)}}function is(t){Zr.call(Sn,t)}function cn(t,e,n,r){return typeof t!="function"?t:function(){var s=A;n&&vt(),Je(e,!0);try{return t.apply(this,arguments)}finally{Je(s,!1),r&&is(Ye)}}}function Er(t,e){return function(n,r){return t.call(this,cn(n,e),cn(r,e))}}(""+Zr).indexOf("[native code]")===-1&&(vt=Ye=X);function Pr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(ee.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),ke(r,s)):ee.CustomEvent&&ke(r=new CustomEvent("unhandledrejection",{detail:s}),s),r&&ee.dispatchEvent&&(dispatchEvent(r),!ee.PromiseRejectionEvent&&ee.onunhandledrejection))try{ee.onunhandledrejection(r)}catch{}Me&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ue=S.reject;function qn(t,e,n,r){if(t.idbdb&&(t._state.openComplete||A.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===er.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>qn(t,e,n,r))):ue(o)}return s._promise(e,(o,i)=>Xe(()=>(A.trans=s,r(o,i,s)))).then(o=>s._completion.then(()=>o))}if(t._state.openComplete)return ue(new M.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ue(new M.DatabaseClosed);t.open().catch(X)}return t._state.dbReadyPromise.then(()=>qn(t,e,n,r))}const nt=String.fromCharCode(65535),Ne="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ct=[],kn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ws=kn,Gs=kn,as=t=>!/(dexie\.js|dexie\.min\.js)/.test(t);function at(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const ls={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yt(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Rt(e))[t],e)}function Qs(){throw M.Type()}function ie(t,e){try{const n=Dr(t),r=Dr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,o){const i=s.length,l=o.length,a=i<l?i:l;for(let c=0;c<a;++c)if(s[c]!==o[c])return s[c]<o[c]?-1:1;return i===l?0:i<l?-1:1}(Cr(t),Cr(e));case"Array":return function(s,o){const i=s.length,l=o.length,a=i<l?i:l;for(let c=0;c<a;++c){const h=ie(s[c],o[c]);if(h!==0)return h}return i===l?0:i<l?-1:1}(t,e)}}catch{}return NaN}function Dr(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=jn(t);return n==="ArrayBuffer"?"binary":n}function Cr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Xs{_trans(e,n,r){const s=this._tx||A.trans,o=this.name;function i(a,c,h){if(!h.schema[o])throw new M.NotFound("Table "+o+" not part of transaction");return n(h.idbtrans,h)}const l=Nt();try{return s&&s.db===this.db?s===A.trans?s._promise(e,i,r):Xe(()=>s._promise(e,i,r),{trans:s,transless:A.transless||A}):qn(this.db,e,[this.name],i)}finally{l&&Ft()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ve(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ae(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(h=>c.keyPath.indexOf(h)>=0)&&c.keyPath.every(h=>n.indexOf(h)>=0))[0];if(r&&this.db._maxKey!==nt)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Me&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,o=this.db._deps.indexedDB;function i(c,h){return o.cmp(c,h)===0}const[l,a]=n.reduce(([c,h],d)=>{const u=s[d],v=e[d];return[c||u,c||!u?at(h,u&&u.multi?m=>{const y=He(m,d);return ve(y)&&y.some(w=>i(v,w))}:m=>i(v,He(m,d))):h]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ve(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){const{db:n,name:r}=this;this.schema.mappedClass=e,e.prototype instanceof Qs&&(e=class extends e{get db(){return n}table(){return r}});const s=new Set;for(let i=e.prototype;i;i=yt(i))Object.getOwnPropertyNames(i).forEach(l=>s.add(l));const o=i=>{if(!i)return i;const l=Object.create(e.prototype);for(let a in i)if(!s.has(a))try{l[a]=i[a]}catch{}return l};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e}defineClass(){return this.mapToClass(function(e){ke(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let o=e;return s&&r&&(o=Yt(s)(e)),this._trans("readwrite",i=>this.core.mutate({trans:i,type:"add",keys:n!=null?[n]:null,values:[o]})).then(i=>i.numFailures?S.reject(i.failures[0]):i.lastResult).then(i=>{if(s)try{Ce(e,s,i)}catch{}return i})}update(e,n){if(typeof e!="object"||ve(e))return this.where(":id").equals(e).modify(n);{const r=He(e,this.schema.primKey.keyPath);if(r===void 0)return ue(new M.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ae(n).forEach(s=>{Ce(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let o=e;return s&&r&&(o=Yt(s)(e)),this._trans("readwrite",i=>this.core.mutate({trans:i,type:"put",values:[o],keys:n!=null?[n]:null})).then(i=>i.numFailures?S.reject(i.failures[0]):i.lastResult).then(i=>{if(s)try{Ce(e,s,i)}catch{}return i})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?S.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:ls})).then(e=>e.numFailures?S.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,o=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",i=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&s)throw new M.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let h=a&&l?e.map(Yt(a)):e;return this.core.mutate({trans:i,type:"add",keys:s,values:h,wantResults:o}).then(({numFailures:d,results:u,lastResult:v,failures:m})=>{if(d===0)return o?u:v;throw new dt(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,m)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,o=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",i=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&s)throw new M.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let h=a&&l?e.map(Yt(a)):e;return this.core.mutate({trans:i,type:"put",keys:s,values:h,wantResults:o}).then(({numFailures:d,results:u,lastResult:v,failures:m})=>{if(d===0)return o?u:v;throw new dt(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,m)})})}bulkUpdate(e){const n=this.core,r=e.map(i=>i.key),s=e.map(i=>i.changes),o=[];return this._trans("readwrite",i=>n.getMany({trans:i,keys:r,cache:"clone"}).then(l=>{const a=[],c=[];e.forEach(({key:d,changes:u},v)=>{const m=l[v];if(m){for(const y of Object.keys(u)){const w=u[y];if(y===this.schema.primKey.keyPath){if(ie(w,d)!==0)throw new M.Constraint("Cannot update primary key in bulkUpdate()")}else Ce(m,y,w)}o.push(v),a.push(d),c.push(m)}});const h=a.length;return n.mutate({trans:i,type:"put",keys:a,values:c,updates:{keys:r,changeSpecs:s}}).then(({numFailures:d,failures:u})=>{if(d===0)return h;for(const v of Object.keys(u)){const m=o[Number(v)];if(m!=null){const y=u[v];delete u[v],u[m]=y}}throw new dt(`${this.name}.bulkUpdate(): ${d} of ${h} operations failed`,u)})}))}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:o})=>{if(r===0)return s;throw new dt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function It(t){var e={},n=function(l,a){if(a){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return e[l].subscribe.apply(null,h),t}if(typeof l=="string")return e[l]};n.addEventType=o;for(var r=1,s=arguments.length;r<s;++r)o(arguments[r]);return n;function o(l,a,c){if(typeof l=="object")return i(l);a||(a=qs),c||(c=X);var h={subscribers:[],fire:c,subscribe:function(d){h.subscribers.indexOf(d)===-1&&(h.subscribers.push(d),h.fire=a(h.fire,d))},unsubscribe:function(d){h.subscribers=h.subscribers.filter(function(u){return u!==d}),h.fire=h.subscribers.reduce(a,c)}};return e[l]=n[l]=h,h}function i(l){ae(l).forEach(function(a){var c=l[a];if(ve(c))o(a,l[a][0],l[a][1]);else{if(c!=="asap")throw new M.InvalidArgument("Invalid event config");var h=o(a,Kt,function(){for(var d=arguments.length,u=new Array(d);d--;)u[d]=arguments[d];h.subscribers.forEach(function(v){Hr(function(){v.apply(null,u)})})})}})}}function xt(t,e){return ft(e).from({prototype:t}),e}function ut(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function En(t,e){t.filter=at(t.filter,e)}function Pn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>at(r(),e()):e,t.justLimit=n&&!r}function en(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new M.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ir(t,e,n){const r=en(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function zt(t,e,n,r){const s=t.replayFilter?at(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},i=(l,a,c)=>{if(!s||s(a,c,u=>a.stop(u),u=>a.fail(u))){var h=a.primaryKey,d=""+h;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(h)),Ie(o,d)||(o[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(i,n),jr(Ir(t,r,n),t.algorithm,i,!t.keysOnly&&t.valueMapper)])}return jr(Ir(t,r,n),at(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function jr(t,e,n,r){var s=ne(r?(o,i,l)=>n(r(o),i,l):n);return t.then(o=>{if(o)return o.start(()=>{var i=()=>o.continue();e&&!e(o,l=>i=l,l=>{o.stop(l),i=X},l=>{o.fail(l),i=X})||s(o.value,o,l=>i=l),i()})})}class Js{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ue.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ue.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=at(n.algorithm,e)}_iterate(e,n){return zt(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ke(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>zt(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(ut(r,!0))return s.count({trans:n,query:{index:en(r,s.schema),range:r.range}}).then(i=>Math.min(i,r.limit));var o=0;return zt(r,()=>(++o,!1),n,s).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],o=r.length-1;function i(c,h){return h?i(c[r[h]],h-1):c[s]}var l=this._ctx.dir==="next"?1:-1;function a(c,h){var d=i(c,o),u=i(h,o);return d<u?-l:d>u?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ut(r,!0)&&r.limit>0){const{valueMapper:s}=r,o=en(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:i})=>s?i.map(s):i)}{const s=[];return zt(r,o=>s.push(o),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,ut(n)?Pn(n,()=>{var r=e;return(s,o)=>r===0||(r===1?(--r,!1):(o(()=>{s.advance(r),r=0}),!1))}):Pn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Pn(this._ctx,()=>{var n=e;return function(r,s,o){return--n<=0&&s(o),n>=0}},!0),this}until(e,n){return En(this._ctx,function(r,s,o){return!e(r.value)||(s(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return En(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=at(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&ut(n,!0)&&n.limit>0)return this._read(s=>{var o=en(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return En(this._ctx,function(s){var o=s.primaryKey.toString(),i=Ie(r,o);return r[o]=!0,!i}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var o=ae(e),i=o.length;s=function(y){for(var w=!1,b=0;b<i;++b){var _=o[b],p=e[_];He(y,_)!==p&&(Ce(y,_,p),w=!0)}return w}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,h=this.db._options.modifyChunkSize||200,d=[];let u=0;const v=[],m=(y,w)=>{const{failures:b,numFailures:_}=w;u+=y-_;for(let p of ae(b))d.push(b[p])};return this.clone().primaryKeys().then(y=>{const w=b=>{const _=Math.min(h,y.length-b);return l.getMany({trans:r,keys:y.slice(b,b+_),cache:"immutable"}).then(p=>{const P=[],k=[],x=a?[]:null,D=[];for(let j=0;j<_;++j){const T=p[j],N={value:Rt(T),primKey:y[b+j]};s.call(N,N.value,N)!==!1&&(N.value==null?D.push(y[b+j]):a||ie(c(T),c(N.value))===0?(k.push(N.value),a&&x.push(y[b+j])):(D.push(y[b+j]),P.push(N.value)))}const I=ut(n)&&n.limit===1/0&&(typeof e!="function"||e===Dn)&&{index:n.index,range:n.range};return Promise.resolve(P.length>0&&l.mutate({trans:r,type:"add",values:P}).then(j=>{for(let T in j.failures)D.splice(parseInt(T),1);m(P.length,j)})).then(()=>(k.length>0||I&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:x,values:k,criteria:I,changeSpec:typeof e!="function"&&e}).then(j=>m(k.length,j))).then(()=>(D.length>0||I&&e===Dn)&&l.mutate({trans:r,type:"delete",keys:D,criteria:I}).then(j=>m(D.length,j))).then(()=>y.length>b+_&&w(b+h))})};return w(0).then(()=>{if(d.length>0)throw new on("Error modifying one or more objects",d,u,v);return y.length})})})}delete(){var e=this._ctx,n=e.range;return ut(e)&&(e.isPrimKey&&!Gs||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:s,range:o}}).then(i=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:l,lastResult:a,results:c,numFailures:h})=>{if(h)throw new on("Could not delete some values",Object.keys(l).map(d=>l[d]),i-h);return i-h}))}):this.modify(Dn)}}const Dn=(t,e)=>e.value=null;function $s(t,e){return t<e?-1:t===e?0:1}function Zs(t,e){return t>e?-1:t===e?0:1}function Ee(t,e,n){var r=t instanceof cs?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function ct(t){return new t.Collection(t,()=>us("")).limit(0)}function eo(t,e,n,r,s,o){for(var i=Math.min(t.length,r.length),l=-1,a=0;a<i;++a){var c=e[a];if(c!==r[a])return s(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):s(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;s(t[a],c)<0&&(l=a)}return i<r.length&&o==="next"?t+n.substr(t.length):i<t.length&&o==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Wt(t,e,n,r){var s,o,i,l,a,c,h,d=n.length;if(!n.every(y=>typeof y=="string"))return Ee(t,"String expected.");function u(y){s=function(b){return b==="next"?_=>_.toUpperCase():_=>_.toLowerCase()}(y),o=function(b){return b==="next"?_=>_.toLowerCase():_=>_.toUpperCase()}(y),i=y==="next"?$s:Zs;var w=n.map(function(b){return{lower:o(b),upper:s(b)}}).sort(function(b,_){return i(b.lower,_.lower)});l=w.map(function(b){return b.upper}),a=w.map(function(b){return b.lower}),c=y,h=y==="next"?"":r}u("next");var v=new t.Collection(t,()=>Ge(l[0],a[d-1]+r));v._ondirectionchange=function(y){u(y)};var m=0;return v._addAlgorithm(function(y,w,b){var _=y.key;if(typeof _!="string")return!1;var p=o(_);if(e(p,a,m))return!0;for(var P=null,k=m;k<d;++k){var x=eo(_,p,l[k],a[k],i,c);x===null&&P===null?m=k+1:(P===null||i(P,x)>0)&&(P=x)}return w(P!==null?function(){y.continue(P+h)}:b),!1}),v}function Ge(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function us(t){return{type:1,lower:t,upper:t}}class cs{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?ct(this):new this.Collection(this,()=>Ge(e,n,!r,!s))}catch{return Ee(this,Ne)}}equals(e){return e==null?Ee(this,Ne):new this.Collection(this,()=>us(e))}above(e){return e==null?Ee(this,Ne):new this.Collection(this,()=>Ge(e,void 0,!0))}aboveOrEqual(e){return e==null?Ee(this,Ne):new this.Collection(this,()=>Ge(e,void 0,!1))}below(e){return e==null?Ee(this,Ne):new this.Collection(this,()=>Ge(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Ee(this,Ne):new this.Collection(this,()=>Ge(void 0,e))}startsWith(e){return typeof e!="string"?Ee(this,"String expected."):this.between(e,e+nt,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Wt(this,(n,r)=>n.indexOf(r[0])===0,[e],nt)}equalsIgnoreCase(e){return Wt(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=qe.apply(ht,arguments);return e.length===0?ct(this):Wt(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=qe.apply(ht,arguments);return e.length===0?ct(this):Wt(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,nt)}anyOf(){const e=qe.apply(ht,arguments);let n=this._cmp;try{e.sort(n)}catch{return Ee(this,Ne)}if(e.length===0)return ct(this);const r=new this.Collection(this,()=>Ge(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((o,i,l)=>{const a=o.key;for(;n(a,e[s])>0;)if(++s,s===e.length)return i(l),!1;return n(a,e[s])===0||(i(()=>{o.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=qe.apply(ht,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ee(this,Ne)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[-(1/0),s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,o=this._descending,i=this._min,l=this._max;if(e.length===0)return ct(this);if(!e.every(_=>_[0]!==void 0&&_[1]!==void 0&&s(_[0],_[1])<=0))return Ee(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",M.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let h,d=s;function u(_,p){return d(_[0],p[0])}try{h=e.reduce(function(_,p){let P=0,k=_.length;for(;P<k;++P){const x=_[P];if(r(p[0],x[1])<0&&r(p[1],x[0])>0){x[0]=i(x[0],p[0]),x[1]=l(x[1],p[1]);break}}return P===k&&_.push(p),_},[]),h.sort(u)}catch{return Ee(this,Ne)}let v=0;const m=c?_=>s(_,h[v][1])>0:_=>s(_,h[v][1])>=0,y=a?_=>o(_,h[v][0])>0:_=>o(_,h[v][0])>=0;let w=m;const b=new this.Collection(this,()=>Ge(h[0][0],h[h.length-1][1],!a,!c));return b._ondirectionchange=_=>{_==="next"?(w=m,d=s):(w=y,d=o),h.sort(u)},b._addAlgorithm((_,p,P)=>{for(var k=_.key;w(k);)if(++v,v===h.length)return p(P),!1;return!!function(x){return!m(x)&&!y(x)}(k)||(this._cmp(k,h[v][1])===0||this._cmp(k,h[v][0])===0||p(()=>{d===s?_.continue(h[v][0]):_.continue(h[v][1])}),!1)}),b}startsWithAnyOf(){const e=qe.apply(ht,arguments);return e.every(n=>typeof n=="string")?e.length===0?ct(this):this.inAnyRange(e.map(n=>[n,n+nt])):Ee(this,"startsWithAnyOf() only works with strings")}}function Te(t){return ne(function(e){return St(e),t(e.target.error),!1})}function St(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const $e=It(null,"storagemutated");class to{_lock(){return Et(!A.global),++this._reculock,this._reculock!==1||A.global||(A.lockOwnerFor=this),this}_unlock(){if(Et(!A.global),--this._reculock==0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{bt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&A.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Et(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new M.DatabaseClosed(r);case"MissingAPIError":throw new M.MissingAPI(r.message,r);default:throw new M.OpenFailed(r)}if(!this.active)throw new M.TransactionInactive;return Et(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ne(s=>{St(s),this._reject(e.error)}),e.onabort=ne(s=>{St(s),this.active&&this._reject(new M.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=ne(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&$e.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ue(new M.ReadOnly("Transaction is readonly"));if(!this.active)return ue(new M.TransactionInactive);if(this._locked())return new S((o,i)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,i)},A])});if(r)return Xe(()=>{var o=new S((i,l)=>{this._lock();const a=n(i,l,this);a&&a.then&&a.then(i,l)});return o.finally(()=>this._unlock()),o._lib=!0,o});var s=new S((o,i)=>{var l=n(o,i,this);l&&l.then&&l.then(o,i)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=S.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function i(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=i)})()}var o=n._waitingFor;return new S((i,l)=>{r.then(a=>n._waitingQueue.push(ne(i.bind(null,a))),a=>n._waitingQueue.push(ne(l.bind(null,a)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new M.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Ie(n,e))return n[e];const r=this.schema[e];if(!r)throw new M.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function Vn(t,e,n,r,s,o,i){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:o,src:(n&&!i?"&":"")+(r?"*":"")+(s?"++":"")+hs(e)}}function hs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ds(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Yr(n,r=>[r.name,r])}}let At=t=>{try{return t.only([[]]),At=()=>[[]],[[]]}catch{return At=()=>nt,nt}};function Ln(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?n=>n[e]:n=>He(n,e)}(t):e=>He(e,t)}function Kr(t){return[].slice.call(t)}let no=0;function jt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function ro(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:h,lowerOpen:d,upperOpen:u}=a;return c===void 0?h===void 0?null:e.upperBound(h,!!u):h===void 0?e.lowerBound(c,!!d):e.bound(c,h,!!d,!!u)}const{schema:s,hasGetAll:o}=function(a,c){const h=Kr(a.objectStoreNames);return{schema:{name:a.name,tables:h.map(d=>c.objectStore(d)).map(d=>{const{keyPath:u,autoIncrement:v}=d,m=ve(u),y=u==null,w={},b={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:m,keyPath:u,autoIncrement:v,unique:!0,extractKey:Ln(u)},indexes:Kr(d.indexNames).map(_=>d.index(_)).map(_=>{const{name:p,unique:P,multiEntry:k,keyPath:x}=_,D={name:p,compound:ve(x),keyPath:x,unique:P,multiEntry:k,extractKey:Ln(x)};return w[jt(x)]=D,D}),getIndexByKeyPath:_=>w[jt(_)]};return w[":id"]=b.primaryKey,u!=null&&(w[jt(u)]=b.primaryKey),b})},hasGetAll:h.length>0&&"getAll"in c.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),i=s.tables.map(a=>function(c){const h=c.name;return{name:h,schema:c,mutate:function({trans:d,type:u,keys:v,values:m,range:y}){return new Promise((w,b)=>{w=ne(w);const _=d.objectStore(h),p=_.keyPath==null,P=u==="put"||u==="add";if(!P&&u!=="delete"&&u!=="deleteRange")throw new Error("Invalid operation type: "+u);const{length:k}=v||m||{length:1};if(v&&m&&v.length!==m.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});let x;const D=[],I=[];let j=0;const T=Y=>{++j,St(Y)};if(u==="deleteRange"){if(y.type===4)return w({numFailures:j,failures:I,results:[],lastResult:void 0});y.type===3?D.push(x=_.clear()):D.push(x=_.delete(r(y)))}else{const[Y,R]=P?p?[m,v]:[m,null]:[v,null];if(P)for(let V=0;V<k;++V)D.push(x=R&&R[V]!==void 0?_[u](Y[V],R[V]):_[u](Y[V])),x.onerror=T;else for(let V=0;V<k;++V)D.push(x=_[u](Y[V])),x.onerror=T}const N=Y=>{const R=Y.target.result;D.forEach((V,B)=>V.error!=null&&(I[B]=V.error)),w({numFailures:j,failures:I,results:u==="delete"?v:D.map(V=>V.result),lastResult:R})};x.onerror=Y=>{T(Y),N(Y)},x.onsuccess=N})},getMany:({trans:d,keys:u})=>new Promise((v,m)=>{v=ne(v);const y=d.objectStore(h),w=u.length,b=new Array(w);let _,p=0,P=0;const k=D=>{const I=D.target;b[I._pos]=I.result,++P===p&&v(b)},x=Te(m);for(let D=0;D<w;++D)u[D]!=null&&(_=y.get(u[D]),_._pos=D,_.onsuccess=k,_.onerror=x,++p);p===0&&v(b)}),get:({trans:d,key:u})=>new Promise((v,m)=>{v=ne(v);const y=d.objectStore(h).get(u);y.onsuccess=w=>v(w.target.result),y.onerror=Te(m)}),query:function(d){return u=>new Promise((v,m)=>{v=ne(v);const{trans:y,values:w,limit:b,query:_}=u,p=b===1/0?void 0:b,{index:P,range:k}=_,x=y.objectStore(h),D=P.isPrimaryKey?x:x.index(P.name),I=r(k);if(b===0)return v({result:[]});if(d){const j=w?D.getAll(I,p):D.getAllKeys(I,p);j.onsuccess=T=>v({result:T.target.result}),j.onerror=Te(m)}else{let j=0;const T=w||!("openKeyCursor"in D)?D.openCursor(I):D.openKeyCursor(I),N=[];T.onsuccess=Y=>{const R=T.result;return R?(N.push(w?R.value:R.primaryKey),++j===b?v({result:N}):void R.continue()):v({result:N})},T.onerror=Te(m)}})}(o),openCursor:function({trans:d,values:u,query:v,reverse:m,unique:y}){return new Promise((w,b)=>{w=ne(w);const{index:_,range:p}=v,P=d.objectStore(h),k=_.isPrimaryKey?P:P.index(_.name),x=m?y?"prevunique":"prev":y?"nextunique":"next",D=u||!("openKeyCursor"in k)?k.openCursor(r(p),x):k.openKeyCursor(r(p),x);D.onerror=Te(b),D.onsuccess=ne(I=>{const j=D.result;if(!j)return void w(null);j.___id=++no,j.done=!1;const T=j.continue.bind(j);let N=j.continuePrimaryKey;N&&(N=N.bind(j));const Y=j.advance.bind(j),R=()=>{throw new Error("Cursor not stopped")};j.trans=d,j.stop=j.continue=j.continuePrimaryKey=j.advance=()=>{throw new Error("Cursor not started")},j.fail=ne(b),j.next=function(){let V=1;return this.start(()=>V--?this.continue():this.stop()).then(()=>this)},j.start=V=>{const B=new Promise((L,z)=>{L=ne(L),D.onerror=Te(z),j.fail=z,j.stop=G=>{j.stop=j.continue=j.continuePrimaryKey=j.advance=R,L(G)}}),Q=()=>{if(D.result)try{V()}catch(L){j.fail(L)}else j.done=!0,j.start=()=>{throw new Error("Cursor behind last entry")},j.stop()};return D.onsuccess=ne(L=>{D.onsuccess=Q,Q()}),j.continue=T,j.continuePrimaryKey=N,j.advance=Y,Q(),B},w(j)},b)})},count({query:d,trans:u}){const{index:v,range:m}=d;return new Promise((y,w)=>{const b=u.objectStore(h),_=v.isPrimaryKey?b:b.index(v.name),p=r(m),P=p?_.count(p):_.count();P.onsuccess=ne(k=>y(k.target.result)),P.onerror=Te(w)})}}}(a)),l={};return i.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:At(e),schema:s}}function Un({_novip:t},e){const n=e.db,r=function(s,o,{IDBKeyRange:i,indexedDB:l},a){return{dbcore:function(h,d){return d.reduce((u,{create:v})=>({...u,...v(u)}),h)}(ro(o,i,a),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const o=s.name;t.core.schema.tables.some(i=>i.name===o)&&(s.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=s.core))})}function hn({_novip:t},e,n,r){n.forEach(s=>{const o=r[s];e.forEach(i=>{const l=Jn(i,s);(!l||"value"in l&&l.value===void 0)&&(i===t.Transaction.prototype||i instanceof t.Transaction?Ue(i,s,{get(){return this.table(s)},set(a){Lr(this,s,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):i[s]=new t.Table(s,o))})})}function Hn({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function so(t,e){return t._cfg.version-e._cfg.version}function oo(t,e,n,r){const s=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,s);o.create(n),o._completion.catch(r);const i=o._reject.bind(o),l=A.transless||A;Xe(()=>{A.trans=o,A.transless=l,e===0?(ae(s).forEach(a=>{Cn(n,a,s[a].primKey,s[a].indexes)}),Un(t,n),S.follow(()=>t.on.populate.fire(o)).catch(i)):function({_novip:a},c,h,d){const u=[],v=a._versions;let m=a._dbSchema=zn(a,a.idbdb,d),y=!1;function w(){return u.length?S.resolve(u.shift()(h.idbtrans)).then(w):S.resolve()}return v.filter(b=>b._cfg.version>=c).forEach(b=>{u.push(()=>{const _=m,p=b._cfg.dbschema;Wn(a,_,d),Wn(a,p,d),m=a._dbSchema=p;const P=fs(_,p);P.add.forEach(x=>{Cn(d,x[0],x[1].primKey,x[1].indexes)}),P.change.forEach(x=>{if(x.recreate)throw new M.Upgrade("Not yet support for changing primary key");{const D=d.objectStore(x.name);x.add.forEach(I=>Yn(D,I)),x.change.forEach(I=>{D.deleteIndex(I.name),Yn(D,I)}),x.del.forEach(I=>D.deleteIndex(I))}});const k=b._cfg.contentUpgrade;if(k&&b._cfg.version>c){Un(a,d),h._memoizedTables={},y=!0;let x=zr(p);P.del.forEach(T=>{x[T]=_[T]}),Hn(a,[a.Transaction.prototype]),hn(a,[a.Transaction.prototype],ae(x),x),h.schema=x;const D=$n(k);let I;D&&vt();const j=S.follow(()=>{if(I=k(h),I&&D){var T=Ye.bind(null,null);I.then(T,T)}});return I&&typeof I.then=="function"?S.resolve(I):j.then(()=>I)}}),u.push(_=>{(!y||!Ws)&&function(p,P){[].slice.call(P.db.objectStoreNames).forEach(k=>p[k]==null&&P.db.deleteObjectStore(k))}(b._cfg.dbschema,_),Hn(a,[a.Transaction.prototype]),hn(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),h.schema=a._dbSchema})}),w().then(()=>{var b,_;_=d,ae(b=m).forEach(p=>{_.db.objectStoreNames.contains(p)||Cn(_,p,b[p].primKey,b[p].indexes)})})}(t,e,o,n).catch(i)})}function fs(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],o=e[r];if(s){const i={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||s.primKey.auto!==o.primKey.auto&&!kn)i.recreate=!0,n.change.push(i);else{const l=s.idxByName,a=o.idxByName;let c;for(c in l)a[c]||i.del.push(c);for(c in a){const h=l[c],d=a[c];h?h.src!==d.src&&i.change.push(d):i.add.push(d)}(i.del.length>0||i.add.length>0||i.change.length>0)&&n.change.push(i)}}else n.add.push([r,o])}return n}function Cn(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>Yn(s,o)),s}function Yn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function zn(t,e,n){const r={};return sn(e.objectStoreNames,0).forEach(s=>{const o=n.objectStore(s);let i=o.keyPath;const l=Vn(hs(i),i||"",!1,!1,!!o.autoIncrement,i&&typeof i!="string",!0),a=[];for(let h=0;h<o.indexNames.length;++h){const d=o.index(o.indexNames[h]);i=d.keyPath;var c=Vn(d.name,i,!!d.unique,!!d.multiEntry,!1,i&&typeof i!="string",!1);a.push(c)}r[s]=ds(s,l,a)}),r}function Wn({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const o=r[s],i=n.objectStore(o);t._hasGetAll="getAll"in i;for(let l=0;l<i.indexNames.length;++l){const a=i.indexNames[l],c=i.index(a).keyPath,h=typeof c=="string"?c:"["+sn(c).join("+")+"]";if(e[o]){const d=e[o].idxByName[h];d&&(d.name=a,delete e[o].idxByName[h],e[o].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ee.WorkerGlobalScope&&ee instanceof ee.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class io{_parseStoresSpec(e,n){ae(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((i,l)=>{const a=(i=i.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Vn(a,c||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),ve(c),l===0)}),o=s.shift();if(o.multi)throw new M.Schema("Primary key cannot be multi-valued");s.forEach(i=>{if(i.auto)throw new M.Schema("Only primary key can be marked as autoIncrement (++)");if(!i.keyPath)throw new M.Schema("Index must have a name and cannot be an empty string")}),n[r]=ds(r,o,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ke(this._cfg.storesSource,e):e;const r=n._versions,s={};let o={};return r.forEach(i=>{ke(s,i._cfg.storesSource),o=i._cfg.dbschema={},i._parseStoresSpec(s,o)}),n._dbSchema=o,Hn(n,[n._allTables,n,n.Transaction.prototype]),hn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ae(o),o),n._storeNames=ae(o),this}upgrade(e){return this._cfg.contentUpgrade=tr(this._cfg.contentUpgrade||X,e),this}}function or(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ot("__dbnames",{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ir(t){return t&&typeof t.databases=="function"}function Gn(t){return Xe(function(){return A.letThrough=!0,t()})}function ao(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function lo(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ue(e.dbOpenError):t);Me&&(e.openCanceller._stackHolder=lt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new M.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,i=null,l=!1;return S.race([r,(typeof navigator>"u"?S.resolve():ao()).then(()=>new S((a,c)=>{if(s(),!n)throw new M.MissingAPI;const h=t.name,d=e.autoSchema?n.open(h):n.open(h,Math.round(10*t.verno));if(!d)throw new M.MissingAPI;d.onerror=Te(c),d.onblocked=ne(t._fireOnBlocked),d.onupgradeneeded=ne(u=>{if(i=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=St,i.abort(),d.result.close();const m=n.deleteDatabase(h);m.onsuccess=m.onerror=ne(()=>{c(new M.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{i.onerror=Te(c);var v=u.oldVersion>Math.pow(2,62)?0:u.oldVersion;l=v<1,t._novip.idbdb=d.result,oo(t,v/10,i,c)}},c),d.onsuccess=ne(()=>{i=null;const u=t._novip.idbdb=d.result,v=sn(u.objectStoreNames);if(v.length>0)try{const y=u.transaction((m=v).length===1?m[0]:m,"readonly");e.autoSchema?function({_novip:w},b,_){w.verno=b.version/10;const p=w._dbSchema=zn(0,b,_);w._storeNames=sn(b.objectStoreNames,0),hn(w,[w._allTables],ae(p),p)}(t,u,y):(Wn(t,t._dbSchema,y),function(w,b){const _=fs(zn(0,w.idbdb,b),w._dbSchema);return!(_.add.length||_.change.some(p=>p.add.length||p.change.length))}(t,y)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Un(t,y)}catch{}var m;Ct.push(t),u.onversionchange=ne(y=>{e.vcFired=!0,t.on("versionchange").fire(y)}),u.onclose=ne(y=>{t.on("close").fire(y)}),l&&function({indexedDB:y,IDBKeyRange:w},b){!ir(y)&&b!=="__dbnames"&&or(y,w).put({name:b}).catch(X)}(t._deps,h),a()},c)}))]).then(()=>(s(),e.onReadyBeingFired=[],S.resolve(Gn(()=>t.on.ready.fire(t.vip))).then(function a(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(tr,X);return e.onReadyBeingFired=[],S.resolve(Gn(()=>c(t.vip))).then(a)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(a=>{e.dbOpenError=a;try{i&&i.abort()}catch{}return r===e.openCanceller&&t._close(),ue(a)}).finally(()=>{e.openComplete=!0,o()})}function Qn(t){var e=o=>t.next(o),n=s(e),r=s(o=>t.throw(o));function s(o){return i=>{var l=o(i),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):ve(a)?Promise.all(a).then(n,r):n(a)}}return s(e)()}function uo(t,e,n){var r=arguments.length;if(r<2)throw new M.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var o=Wr(s);return[t,o,n]}function ps(t,e,n,r,s){return S.resolve().then(()=>{const o=A.transless||A,i=t._createTransaction(e,n,t._dbSchema,r),l={trans:i,transless:o};if(r)i.idbtrans=r.idbtrans;else try{i.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===er.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ps(t,e,n,null,s))):ue(d)}const a=$n(s);let c;a&&vt();const h=S.follow(()=>{if(c=s.call(i,i),c)if(a){var d=Ye.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Qn(c))},l);return(c&&typeof c.then=="function"?S.resolve(c).then(d=>i.active?d:ue(new M.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>c)).then(d=>(r&&i._resolve(),i._completion.then(()=>d))).catch(d=>(i._reject(d),ue(d)))})}function Gt(t,e,n){const r=ve(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const co={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},o=[];function i(h,d,u){const v=jt(h),m=s[v]=s[v]||[],y=h==null?0:typeof h=="string"?1:h.length,w=d>0,b={...u,isVirtual:w,keyTail:d,keyLength:y,extractKey:Ln(h),unique:!w&&u.unique};return m.push(b),b.isPrimaryKey||o.push(b),y>1&&i(y===2?h[0]:h.slice(0,y-1),d+1,u),m.sort((_,p)=>_.keyTail-p.keyTail),b}const l=i(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(const h of r.indexes)i(h.keyPath,0,h);function a(h){const d=h.query.index;return d.isVirtual?{...h,query:{index:d,range:(u=h.query.range,v=d.keyTail,{type:u.type===1?2:u.type,lower:Gt(u.lower,u.lowerOpen?t.MAX_KEY:t.MIN_KEY,v),lowerOpen:!0,upper:Gt(u.upper,u.upperOpen?t.MIN_KEY:t.MAX_KEY,v),upperOpen:!0})}}:h;var u,v}return{...n,schema:{...r,primaryKey:l,indexes:o,getIndexByKeyPath:function(h){const d=s[jt(h)];return d&&d[0]}},count:h=>n.count(a(h)),query:h=>n.query(a(h)),openCursor(h){const{keyTail:d,isVirtual:u,keyLength:v}=h.query.index;return u?n.openCursor(a(h)).then(m=>m&&function(y){return Object.create(y,{continue:{value:function(b){b!=null?y.continue(Gt(b,h.reverse?t.MAX_KEY:t.MIN_KEY,d)):h.unique?y.continue(y.key.slice(0,v).concat(h.reverse?t.MIN_KEY:t.MAX_KEY,d)):y.continue()}},continuePrimaryKey:{value(b,_){y.continuePrimaryKey(Gt(b,t.MAX_KEY,d),_)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const b=y.key;return v===1?b[0]:b.slice(0,v)}},value:{get:()=>y.value}})}(m)):n.openCursor(h)}}}}}};function ar(t,e,n,r){return n=n||{},r=r||"",ae(t).forEach(s=>{if(Ie(e,s)){var o=t[s],i=e[s];if(typeof o=="object"&&typeof i=="object"&&o&&i){const l=jn(o);l!==jn(i)?n[r+s]=e[s]:l==="Object"?ar(o,i,n,r+s+"."):o!==i&&(n[r+s]=e[s])}else o!==i&&(n[r+s]=e[s])}else n[r+s]=void 0}),ae(e).forEach(s=>{Ie(t,s)||(n[r+s]=e[s])}),n}const ho={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const i=A.trans,{deleting:l,creating:a,updating:c}=i.table(e).hook;switch(o.type){case"add":if(a.fire===X)break;return i._promise("readwrite",()=>h(o),!0);case"put":if(a.fire===X&&c.fire===X)break;return i._promise("readwrite",()=>h(o),!0);case"delete":if(l.fire===X)break;return i._promise("readwrite",()=>h(o),!0);case"deleteRange":if(l.fire===X)break;return i._promise("readwrite",()=>function(u){return d(u.trans,u.range,1e4)}(o),!0)}return n.mutate(o);function h(u){const v=A.trans,m=u.keys||function(y,w){return w.type==="delete"?w.keys:w.keys||w.values.map(y.extractKey)}(r,u);if(!m)throw new Error("Keys missing");return(u=u.type==="add"||u.type==="put"?{...u,keys:m}:{...u}).type!=="delete"&&(u.values=[...u.values]),u.keys&&(u.keys=[...u.keys]),function(y,w,b){return w.type==="add"?Promise.resolve([]):y.getMany({trans:w.trans,keys:b,cache:"immutable"})}(n,u,m).then(y=>{const w=m.map((b,_)=>{const p=y[_],P={onerror:null,onsuccess:null};if(u.type==="delete")l.fire.call(P,b,p,v);else if(u.type==="add"||p===void 0){const k=a.fire.call(P,b,u.values[_],v);b==null&&k!=null&&(b=k,u.keys[_]=b,r.outbound||Ce(u.values[_],r.keyPath,b))}else{const k=ar(p,u.values[_]),x=c.fire.call(P,k,b,p,v);if(x){const D=u.values[_];Object.keys(x).forEach(I=>{Ie(D,I)?D[I]=x[I]:Ce(D,I,x[I])})}}return P});return n.mutate(u).then(({failures:b,results:_,numFailures:p,lastResult:P})=>{for(let k=0;k<m.length;++k){const x=_?_[k]:m[k],D=w[k];x==null?D.onerror&&D.onerror(b[k]):D.onsuccess&&D.onsuccess(u.type==="put"&&y[k]?u.values[k]:x)}return{failures:b,results:_,numFailures:p,lastResult:P}}).catch(b=>(w.forEach(_=>_.onerror&&_.onerror(b)),Promise.reject(b)))})}function d(u,v,m){return n.query({trans:u,values:!1,query:{index:r,range:v},limit:m}).then(({result:y})=>h({type:"delete",keys:y,trans:u}).then(w=>w.numFailures>0?Promise.reject(w.failures[0]):y.length<m?{failures:[],numFailures:0,lastResult:void 0}:d(u,{...v,lower:y[y.length-1],lowerOpen:!0},m)))}}}}})};function ms(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,o=0;s<e.keys.length&&o<t.length;++s)ie(e.keys[s],t[o])===0&&(r.push(n?Rt(e.values[s]):e.values[s]),++o);return r.length===t.length?r:null}catch{return null}}const fo={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=ms(r.keys,r.trans._cache,r.cache==="clone");return s?S.resolve(s):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Rt(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function lr(t){return!("from"in t)}const Fe=function(t,e){if(!this){const n=new Fe;return t&&"d"in t&&ke(n,t),n}ke(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Tt(t,e,n){const r=ie(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(lr(t))return ke(t,{from:e,to:n,d:1});const s=t.l,o=t.r;if(ie(n,t.from)<0)return s?Tt(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Or(t);if(ie(e,t.to)>0)return o?Tt(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Or(t);ie(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),ie(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const i=!t.r;s&&!t.l&&dn(t,s),o&&i&&dn(t,o)}function dn(t,e){lr(e)||function n(r,{from:s,to:o,l:i,r:l}){Tt(r,s,o),i&&n(r,i),l&&n(r,l)}(t,e)}function po(t,e){const n=Xn(e);let r=n.next();if(r.done)return!1;let s=r.value;const o=Xn(t);let i=o.next(s.from),l=i.value;for(;!r.done&&!i.done;){if(ie(l.from,s.to)<=0&&ie(l.to,s.from)>=0)return!0;ie(s.from,l.from)<0?s=(r=n.next(l.from)).value:l=(i=o.next(s.from)).value}return!1}function Xn(t){let e=lr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&ie(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||ie(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Or(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const o=s==="r"?"l":"r",i={...t},l=t[s];t.from=l.from,t.to=l.to,t[s]=l[s],i[s]=l[o],t[o]=i,i.d=Sr(i)}t.d=Sr(t)}function Sr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}gt(Fe.prototype,{add(t){return dn(this,t),this},addKey(t){return Tt(this,t,t),this},addKeys(t){return t.forEach(e=>Tt(this,e,e)),this},[Kn](){return Xn(this)}});const mo={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Fe(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:o}=s,{primaryKey:i}=o,{extractKey:l,outbound:a}=i,c={...s,mutate:u=>{const v=u.trans,m=v.mutatedParts||(v.mutatedParts={}),y=x=>{const D=`idb://${e}/${r}/${x}`;return m[D]||(m[D]=new Fe)},w=y(""),b=y(":dels"),{type:_}=u;let[p,P]=u.type==="deleteRange"?[u.range]:u.type==="delete"?[u.keys]:u.values.length<50?[[],u.values]:[];const k=u.trans._cache;return s.mutate(u).then(x=>{if(ve(p)){_!=="delete"&&(p=x.results),w.addKeys(p);const D=ms(p,k);D||_==="add"||b.addKeys(p),(D||P)&&function(I,j,T,N){function Y(R){const V=I(R.name||"");function B(L){return L!=null?R.extractKey(L):null}const Q=L=>R.multiEntry&&ve(L)?L.forEach(z=>V.addKey(z)):V.addKey(L);(T||N).forEach((L,z)=>{const G=T&&B(T[z]),Z=N&&B(N[z]);ie(G,Z)!==0&&(G!=null&&Q(G),Z!=null&&Q(Z))})}j.indexes.forEach(Y)}(y,o,D,P)}else if(p){const D={from:p.lower,to:p.upper};b.add(D),w.add(D)}else w.add(n),b.add(n),o.indexes.forEach(D=>y(D.name).add(n));return x})}},h=({query:{index:u,range:v}})=>{var m,y;return[u,new Fe((m=v.lower)!==null&&m!==void 0?m:t.MIN_KEY,(y=v.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},d={get:u=>[i,new Fe(u.key)],getMany:u=>[i,new Fe().addKeys(u.keys)],count:h,query:h,openCursor:h};return ae(d).forEach(u=>{c[u]=function(v){const{subscr:m}=A;if(m){const y=P=>{const k=`idb://${e}/${r}/${P}`;return m[k]||(m[k]=new Fe)},w=y(""),b=y(":dels"),[_,p]=d[u](v);if(y(_.name||"").add(p),!_.isPrimaryKey){if(u!=="count"){const P=u==="query"&&a&&v.values&&s.query({...v,values:!1});return s[u].apply(this,arguments).then(k=>{if(u==="query"){if(a&&v.values)return P.then(({result:D})=>(w.addKeys(D),k));const x=v.values?k.result.map(l):k.result;v.values?w.addKeys(x):b.addKeys(x)}else if(u==="openCursor"){const x=k,D=v.values;return x&&Object.create(x,{key:{get:()=>(b.addKey(x.primaryKey),x.key)},primaryKey:{get(){const I=x.primaryKey;return b.addKey(I),I}},value:{get:()=>(D&&w.addKey(x.primaryKey),x.value)}})}return k})}b.add(n)}}return s[u].apply(this,arguments)}}),c}}}};class ot{constructor(e,n){this._middlewares={},this.verno=0;const r=ot.dependencies;this._options=n={addons:ot.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;o.dbReadyPromise=new S(l=>{o.dbReadyResolve=l}),o.openCanceller=new S((l,a)=>{o.cancelOpen=a}),this._state=o,this.name=e,this.on=It(this,"populate","blocked","versionchange","close",{ready:[tr,X]}),this.on.ready.subscribe=Ur(this.on.ready.subscribe,l=>(a,c)=>{ot.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||S.resolve().then(a),c&&l(a);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function u(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(u)})}})}),this.Collection=(i=this,xt(Js.prototype,function(l,a){this.db=i;let c=ls,h=null;if(a)try{c=a()}catch(m){h=m}const d=l._ctx,u=d.table,v=u.hook.reading.fire;this._ctx={table:u,index:d.index,isPrimKey:!d.index||u.schema.primKey.keyPath&&d.index===u.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:d.or,valueMapper:v!==Kt?v:null}})),this.Table=function(l){return xt(Xs.prototype,function(a,c,h){this.db=l,this._tx=h,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:It(null,{creating:[Rs,X],reading:[Ms,Kt],updating:[Fs,X],deleting:[Ns,X]})})}(this),this.Transaction=function(l){return xt(to.prototype,function(a,c,h,d,u){this.db=l,this.mode=a,this.storeNames=c,this.schema=h,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=It(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new S((v,m)=>{this._resolve=v,this._reject=m}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},v=>{var m=this.active;return this.active=!1,this.on.error.fire(v),this.parent?this.parent._reject(v):m&&this.idbtrans&&this.idbtrans.abort(),ue(v)})})}(this),this.Version=function(l){return xt(io.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return xt(cs.prototype,function(a,c,h){if(this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:h},this._cmp=this._ascending=ie,this._descending=(d,u)=>ie(u,d),this._max=(d,u)=>ie(d,u)>0?d:u,this._min=(d,u)=>ie(d,u)<0?d:u,this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new M.MissingAPI})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=At(n.IDBKeyRange),this._createTransaction=(l,a,c,h)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,h),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ct.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(co),this.use(ho),this.use(mo),this.use(fo),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new M.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new M.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(so),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?e():new S((n,r)=>{if(this._state.openComplete)return r(new M.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new M.DatabaseClosed);this.open().catch(X)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:s}),o.sort((i,l)=>i.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return lo(this)}_close(){const e=this._state,n=Ct.indexOf(this);if(n>=0&&Ct.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new S(r=>{e.dbReadyResolve=r}),e.openCanceller=new S((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new M.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new S((r,s)=>{const o=()=>{this.close();var i=this._deps.indexedDB.deleteDatabase(this.name);i.onsuccess=ne(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!ir(l)&&c!=="__dbnames"&&or(l,a).delete(c).catch(X)})(this._deps,this.name),r()}),i.onerror=Te(s),i.onblocked=this._fireOnBlocked};if(e)throw new M.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ae(this._allTables).map(e=>this._allTables[e])}transaction(){const e=uo.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=A.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const o=e.indexOf("?")!==-1;let i,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var h=c instanceof this.Table?c.name:c;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e==="readonly")i="readonly";else{if(e!="rw"&&e!="readwrite")throw new M.InvalidArgument("Invalid transaction mode: "+e);i="readwrite"}if(s){if(s.mode==="readonly"&&i==="readwrite"){if(!o)throw new M.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!o)throw new M.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),o&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(h,d)=>{d(c)}):ue(c)}const a=ps.bind(null,this,i,l,s,r);return s?s._promise(i,a,"lock"):A.trans?bt(A.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Ie(this._allTables,e))throw new M.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const yo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class go{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[yo](){return this}}function ys(t,e){return ae(e).forEach(n=>{dn(t[n]||(t[n]=new Fe),e[n])}),t}let fn;try{fn={indexedDB:ee.indexedDB||ee.mozIndexedDB||ee.webkitIndexedDB||ee.msIndexedDB,IDBKeyRange:ee.IDBKeyRange||ee.webkitIDBKeyRange}}catch{fn={indexedDB:null,IDBKeyRange:null}}function gs(t){return new go(e=>{const n=$n(t);let r=!1,s={},o={};const i={get closed(){return r},unsubscribe:()=>{r=!0,$e.storagemutated.unsubscribe(h)}};e.start&&e.start(i);let l=!1,a=!1;function c(){return ae(o).some(u=>s[u]&&po(s[u],o[u]))}const h=u=>{ys(s,u),c()&&d()},d=()=>{if(l||r||!fn.indexedDB)return;s={};const u={},v=function(m){n&&vt();const y=()=>Xe(t,{subscr:m,trans:null}),w=A.trans?bt(A.transless,y):y();return n&&w.then(Ye,Ye),w}(u);a||($e("storagemutated",h),a=!0),l=!0,Promise.resolve(v).then(m=>{l=!1,r||(c()?d():(s={},o=u,e.next&&e.next(m)))},m=>{["DatabaseClosedError","AbortError"].includes(m==null?void 0:m.name)||(l=!1,e.error&&e.error(m),i.unsubscribe())})};return d(),i})}const tt=ot;function tn(t){let e=Ve;try{Ve=!0,$e.storagemutated.fire(t)}finally{Ve=e}}gt(tt,{...Qt,delete:t=>new tt(t,{addons:[]}).delete(),exists:t=>new tt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return ir(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!=="__dbnames")):or(e,n).toCollection().primaryKeys()}(tt.dependencies).then(t)}catch{return ue(new M.MissingAPI)}},defineClass:()=>function(t){ke(this,t)},ignoreTransaction:t=>A.trans?bt(A.transless,t):t(),vip:Gn,async:function(t){return function(){try{var e=Qn(t.apply(this,arguments));return e&&typeof e.then=="function"?e:S.resolve(e)}catch(n){return ue(n)}}},spawn:function(t,e,n){try{var r=Qn(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:S.resolve(r)}catch(s){return ue(s)}},currentTransaction:{get:()=>A.trans||null},waitFor:function(t,e){const n=S.resolve(typeof t=="function"?tt.ignoreTransaction(t):t).timeout(e||6e4);return A.trans?A.trans.waitFor(n):n},Promise:S,debug:{get:()=>Me,set:t=>{Qr(t,t==="dexie"?()=>!0:as)}},derive:ft,extend:ke,props:gt,override:Ur,Events:It,on:$e,liveQuery:gs,extendObservabilitySet:ys,getByKeyPath:He,setByKeyPath:Ce,delByKeyPath:function(t,e){typeof e=="string"?Ce(t,e,void 0):"length"in e&&[].map.call(e,function(n){Ce(t,n,void 0)})},shallowClone:zr,deepClone:Rt,getObjectDiff:ar,cmp:ie,asap:Hr,minKey:-(1/0),addons:[],connections:Ct,errnames:er,dependencies:fn,semVer:"4.0.1-alpha.10",version:"4.0.1-alpha.10".split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),tt.maxKey=At(tt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($e("storagemutated",t=>{if(!Ve){let e;kn?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,t)):e=new CustomEvent("x-storagemutated-1",{detail:t}),Ve=!0,dispatchEvent(e),Ve=!1}}),addEventListener("x-storagemutated-1",({detail:t})=>{Ve||tn(t)}));let Ve=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel("x-storagemutated-1");typeof t.unref=="function"&&t.unref(),$e("storagemutated",e=>{Ve||t.postMessage(e)}),t.onmessage=e=>{e.data&&tn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){$e("storagemutated",e=>{try{Ve||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key==="x-storagemutated-1"){const n=JSON.parse(e.newValue);n&&tn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type==="x-storagemutated-1"&&tn(e.changedParts)})}S.rejectionMapper=function(t,e){if(!t||t instanceof pt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!xr[t.name])return t;var n=new xr[t.name](e||t.message,t);return"stack"in t&&Ue(n,"stack",{get:function(){return this.inner.stack}}),n},Qr(Me,as);const Bt=new ot("myDatabase");Bt.version(1).stores({tasks:"++id, category, title ,description, date"});const vo=t=>({}),Ar=t=>({});function bo(t){let e,n,r,s,o,i,l,a,c,h;const d=t[4].header,u=br(d,t,t[3],Ar),v=t[4].default,m=br(v,t,t[3],null);return{c(){e=K("dialog"),n=K("div"),u&&u.c(),r=F(),s=K("hr"),o=F(),m&&m.c(),i=F(),l=K("hr"),this.h()},l(y){e=O(y,"DIALOG",{class:!0});var w=C(e);n=O(w,"DIV",{class:!0});var b=C(n);u&&u.l(b),r=q(b),s=O(b,"HR",{}),o=q(b),m&&m.l(b),i=q(b),l=O(b,"HR",{}),b.forEach(E),w.forEach(E),this.h()},h(){f(n,"class","svelte-1c12kov"),f(e,"class","svelte-1c12kov")},m(y,w){Ze(y,e,w),g(e,n),u&&u.m(n,null),g(n,r),g(n,s),g(n,o),m&&m.m(n,null),g(n,i),g(n,l),t[6](e),a=!0,c||(h=[pe(n,"click",bs(t[5])),pe(e,"close",t[7]),pe(e,"click",_s(t[8]))],c=!0)},p(y,[w]){u&&u.p&&(!a||w&8)&&_r(u,d,y,y[3],a?kr(d,y[3],w,vo):wr(y[3]),Ar),m&&m.p&&(!a||w&8)&&_r(m,v,y,y[3],a?kr(v,y[3],w,null):wr(y[3]),null)},i(y){a||(Be(u,y),Be(m,y),a=!0)},o(y){Le(u,y),Le(m,y),a=!1},d(y){y&&E(e),u&&u.d(y),m&&m.d(y),t[6](null),c=!1,gn(h)}}}function _o(t,e,n){let{$$slots:r={},$$scope:s}=e,{showModal:o}=e;const i=()=>{l.close()};let l;function a(u){ws.call(this,t,u)}function c(u){Mt[u?"unshift":"push"](()=>{l=u,n(1,l)})}const h=()=>n(0,o=!1),d=()=>l.close();return t.$$set=u=>{"showModal"in u&&n(0,o=u.showModal),"$$scope"in u&&n(3,s=u.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&l&&o&&l.showModal()},[o,l,i,s,r,a,c,h,d]}class vs extends pn{constructor(e){super(),mn(this,e,_o,bo,yn,{showModal:0,close:2})}get close(){return this.$$.ctx[2]}}function wo(t){let e,n,r,s,o,i,l,a,c,h,d,u,v,m,y,w,b,_,p,P,k,x,D,I,j,T,N,Y,R,V,B,Q,L,z,G,Z,te,xe,se,Pe,oe,de,re,be,_e;return{c(){e=K("div"),n=K("div"),r=J("svg"),s=J("path"),o=J("path"),i=J("path"),l=F(),a=K("h1"),c=ce("Edit Task"),h=F(),d=K("label"),u=ce("Category"),v=F(),m=K("input"),y=F(),w=K("label"),b=ce("Title"),_=F(),p=K("input"),P=F(),k=K("label"),x=ce("description"),D=F(),I=K("input"),j=F(),T=K("label"),N=ce("Date"),Y=F(),R=K("div"),V=K("div"),B=J("svg"),Q=J("path"),L=J("rect"),z=J("line"),G=J("line"),Z=J("line"),te=J("rect"),xe=F(),se=K("input"),Pe=F(),oe=K("div"),de=K("button"),re=ce("Submit"),this.h()},l(we){e=O(we,"DIV",{class:!0});var U=C(e);n=O(U,"DIV",{class:!0});var Ke=C(n);r=$(Ke,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var je=C(r);s=$(je,"path",{stroke:!0,d:!0}),C(s).forEach(E),o=$(je,"path",{d:!0}),C(o).forEach(E),i=$(je,"path",{d:!0}),C(i).forEach(E),je.forEach(E),l=q(Ke),a=O(Ke,"H1",{class:!0});var le=C(a);c=he(le,"Edit Task"),le.forEach(E),Ke.forEach(E),h=q(U),d=O(U,"LABEL",{for:!0,class:!0});var W=C(d);u=he(W,"Category"),W.forEach(E),v=q(U),m=O(U,"INPUT",{id:!0,class:!0}),y=q(U),w=O(U,"LABEL",{for:!0,class:!0});var H=C(w);b=he(H,"Title"),H.forEach(E),_=q(U),p=O(U,"INPUT",{id:!0,class:!0}),P=q(U),k=O(U,"LABEL",{for:!0,class:!0});var Oe=C(k);x=he(Oe,"description"),Oe.forEach(E),D=q(U),I=O(U,"INPUT",{id:!0,class:!0}),j=q(U),T=O(U,"LABEL",{for:!0,class:!0});var De=C(T);N=he(De,"Date"),De.forEach(E),Y=q(U),R=O(U,"DIV",{class:!0});var Se=C(R);V=O(Se,"DIV",{class:!0});var me=C(V);B=$(me,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var fe=C(B);Q=$(fe,"path",{stroke:!0,d:!0}),C(Q).forEach(E),L=$(fe,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),C(L).forEach(E),z=$(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(z).forEach(E),G=$(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(G).forEach(E),Z=$(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(Z).forEach(E),te=$(fe,"rect",{x:!0,y:!0,width:!0,height:!0}),C(te).forEach(E),fe.forEach(E),me.forEach(E),xe=q(Se),se=O(Se,"INPUT",{id:!0,class:!0,placeholder:!0}),Se.forEach(E),Pe=q(U),oe=O(U,"DIV",{class:!0});var ze=C(oe);de=O(ze,"BUTTON",{class:!0});var We=C(de);re=he(We,"Submit"),We.forEach(E),ze.forEach(E),U.forEach(E),this.h()},h(){f(s,"stroke","none"),f(s,"d","M0 0h24v24H0z"),f(o,"d","M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12"),f(i,"d","M20 12v4h-4a2 2 0 0 1 0 -4h4"),f(r,"xmlns","http://www.w3.org/2000/svg"),f(r,"class","icon icon-tabler icon-tabler-wallet"),f(r,"width","30"),f(r,"height","30"),f(r,"viewBox","0 0 24 24"),f(r,"stroke-width","1"),f(r,"stroke","currentColor"),f(r,"fill","none"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(a,"class","text-gray-800 font-lg font-bold tracking-normal leading-tight mt-1 ml-2"),f(n,"class","w-full flex justify-start text-green-400"),f(d,"for","category"),f(d,"class","text-gray-800 text-xs font-bold leading-tight tracking-normal"),f(m,"id","category"),f(m,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(w,"for","title"),f(w,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(p,"id","title"),f(p,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(k,"for","description"),f(k,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(I,"id","description"),f(I,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(T,"for","date"),f(T,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(Q,"stroke","none"),f(Q,"d","M0 0h24v24H0z"),f(L,"x","4"),f(L,"y","5"),f(L,"width","16"),f(L,"height","16"),f(L,"rx","2"),f(z,"x1","16"),f(z,"y1","3"),f(z,"x2","16"),f(z,"y2","7"),f(G,"x1","8"),f(G,"y1","3"),f(G,"x2","8"),f(G,"y2","7"),f(Z,"x1","4"),f(Z,"y1","11"),f(Z,"x2","20"),f(Z,"y2","11"),f(te,"x","8"),f(te,"y","15"),f(te,"width","2"),f(te,"height","2"),f(B,"xmlns","http://www.w3.org/2000/svg"),f(B,"class","icon icon-tabler icon-tabler-calendar-event"),f(B,"width","20"),f(B,"height","20"),f(B,"viewBox","0 0 24 24"),f(B,"stroke-width","1.5"),f(B,"stroke","currentColor"),f(B,"fill","none"),f(B,"stroke-linecap","round"),f(B,"stroke-linejoin","round"),f(V,"class","absolute right-0 text-gray-600 flex items-center pr-3 h-full cursor-pointer"),f(se,"id","date"),f(se,"class","text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(se,"placeholder","DD/MM/YYYY"),f(R,"class","relative mb-2 mt-2"),f(de,"class","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 transition duration-150 ease-in-out hover:bg-indigo-600 bg-indigo-700 rounded text-white px-8 py-2 text-sm"),f(oe,"class","flex items-center justify-center w-full"),f(e,"class","relative py-1 px-16 bg-white shadow-md rounded border border-neutral-950")},m(we,U){Ze(we,e,U),g(e,n),g(n,r),g(r,s),g(r,o),g(r,i),g(n,l),g(n,a),g(a,c),g(e,h),g(e,d),g(d,u),g(e,v),g(e,m),ye(m,t[0]),g(e,y),g(e,w),g(w,b),g(e,_),g(e,p),ye(p,t[1]),g(e,P),g(e,k),g(k,x),g(e,D),g(e,I),ye(I,t[2]),g(e,j),g(e,T),g(T,N),g(e,Y),g(e,R),g(R,V),g(V,B),g(B,Q),g(B,L),g(B,z),g(B,G),g(B,Z),g(B,te),g(R,xe),g(R,se),ye(se,t[3]),g(e,Pe),g(e,oe),g(oe,de),g(de,re),be||(_e=[pe(m,"input",t[10]),pe(p,"input",t[11]),pe(I,"input",t[12]),pe(se,"input",t[13]),pe(de,"click",function(){Nr(t[8](t[4]))&&t[8](t[4]).apply(this,arguments)})],be=!0)},p(we,U){t=we,U&1&&m.value!==t[0]&&ye(m,t[0]),U&2&&p.value!==t[1]&&ye(p,t[1]),U&4&&I.value!==t[2]&&ye(I,t[2]),U&8&&se.value!==t[3]&&ye(se,t[3])},d(we){we&&E(e),be=!1,gn(_e)}}}function ko(t){let e,n,r,s,o,i,l,a,c,h,d,u,v,m,y,w,b,_,p,P,k,x,D,I,j,T,N,Y,R,V,B,Q,L,z,G,Z,te,xe,se,Pe,oe,de,re,be,_e,we,U;function Ke(le){t[14](le)}let je={$$slots:{default:[wo]},$$scope:{ctx:t}};return t[6]!==void 0&&(je.showModal=t[6]),re=new vs({props:je}),Mt.push(()=>Rr(re,"showModal",Ke)),t[15](re),{c(){e=K("html"),n=K("head"),r=F(),s=K("body"),o=K("div"),i=K("div"),l=K("div"),a=K("div"),c=K("img"),d=F(),u=K("button"),v=K("div"),m=J("svg"),y=J("path"),w=F(),b=K("button"),_=K("div"),p=J("svg"),P=J("path"),k=F(),x=K("div"),D=K("div"),I=K("p"),j=ce(t[0]),T=F(),N=K("div"),Y=K("div"),R=K("p"),V=ce(t[1]),B=F(),Q=K("div"),L=K("div"),z=K("p"),G=ce(t[2]),Z=F(),te=K("div"),xe=K("div"),se=K("p"),Pe=ce(t[3]),oe=F(),de=K("div"),vn(re.$$.fragment),this.h()},l(le){e=O(le,"HTML",{});var W=C(e);n=O(W,"HEAD",{});var H=C(n);H.forEach(E),r=q(W),s=O(W,"BODY",{});var Oe=C(s);o=O(Oe,"DIV",{class:!0});var De=C(o);i=O(De,"DIV",{class:!0});var Se=C(i);l=O(Se,"DIV",{class:!0});var me=C(l);a=O(me,"DIV",{class:!0});var fe=C(a);c=O(fe,"IMG",{src:!0,class:!0,alt:!0}),d=q(fe),u=O(fe,"BUTTON",{class:!0});var ze=C(u);v=O(ze,"DIV",{class:!0});var We=C(v);m=$(We,"svg",{stroke:!0,fill:!0,"stroke-width":!0,height:!0,width:!0,viewBox:!0,xmlns:!0});var Re=C(m);y=$(Re,"path",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(y).forEach(E),Re.forEach(E),We.forEach(E),ze.forEach(E),w=q(fe),b=O(fe,"BUTTON",{class:!0});var _t=C(b);_=O(_t,"DIV",{class:!0});var Ae=C(_);p=$(Ae,"svg",{stroke:!0,fill:!0,"stroke-width":!0,height:!0,width:!0,viewBox:!0,xmlns:!0});var qt=C(p);P=$(qt,"path",{fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(P).forEach(E),qt.forEach(E),Ae.forEach(E),_t.forEach(E),fe.forEach(E),k=q(me),x=O(me,"DIV",{class:!0});var et=C(x);D=O(et,"DIV",{class:!0});var wt=C(D);I=O(wt,"P",{class:!0});var kt=C(I);j=he(kt,t[0]),kt.forEach(E),wt.forEach(E),et.forEach(E),T=q(me),N=O(me,"DIV",{class:!0});var ur=C(N);Y=O(ur,"DIV",{class:!0});var cr=C(Y);R=O(cr,"P",{class:!0});var hr=C(R);V=he(hr,t[1]),hr.forEach(E),cr.forEach(E),ur.forEach(E),B=q(me),Q=O(me,"DIV",{class:!0});var dr=C(Q);L=O(dr,"DIV",{class:!0});var fr=C(L);z=O(fr,"P",{class:!0});var pr=C(z);G=he(pr,t[2]),pr.forEach(E),fr.forEach(E),dr.forEach(E),Z=q(me),te=O(me,"DIV",{class:!0});var mr=C(te);xe=O(mr,"DIV",{class:!0});var yr=C(xe);se=O(yr,"P",{class:!0});var gr=C(se);Pe=he(gr,t[3]),gr.forEach(E),yr.forEach(E),mr.forEach(E),me.forEach(E),Se.forEach(E),oe=q(De),de=O(De,"DIV",{});var vr=C(de);bn(re.$$.fragment,vr),vr.forEach(E),De.forEach(E),Oe.forEach(E),W.forEach(E),this.h()},h(){nn(c.src,h="https://horizon-tailwind-react-git-tailwind-components-horizon-ui.vercel.app/static/media/Nft3.3b3e6a4b3ada7618de6c.png")||f(c,"src",h),f(c,"class","mb-0 h-10 w-full rounded-xl"),f(c,"alt",""),f(y,"fill","none"),f(y,"stroke-linecap","round"),f(y,"stroke-linejoin","round"),f(y,"stroke-width","2"),f(y,"d","M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"),f(m,"stroke","currentColor"),f(m,"fill","currentColor"),f(m,"stroke-width","0"),f(m,"height","1em"),f(m,"width","1em"),f(m,"viewBox","0 0 20 20"),f(m,"xmlns","http://www.w3.org/2000/svg"),f(v,"class","flex h-full w-full items-center justify-center rounded-full text-xl hover: bg-red-400"),f(u,"class","absolute top-1 right-3 flex items-center justify-center rounded-full bg-red-400 p-2 text-brand-500 hover:cursor-pointer"),f(P,"fill","none"),f(P,"stroke-linecap","round"),f(P,"stroke-linejoin","round"),f(P,"stroke-width","1"),f(P,"d","M12.3 3.7l4 4L4 20H0v-4L12.3 3.7zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z"),f(p,"stroke","currentColor"),f(p,"fill","currentColor"),f(p,"stroke-width","0"),f(p,"height","1em"),f(p,"width","1em"),f(p,"viewBox","0 0 20 20"),f(p,"xmlns","http://www.w3.org/2000/svg"),f(_,"class","flex h-full w-full items-center justify-center rounded-full text-xl hover: bg-green-400"),f(b,"class","absolute top-1 left-3 flex items-center justify-center rounded-full bg-green-400 p-2 text-brand-500 hover:cursor-pointer"),f(a,"class","relative w-full"),f(I,"class","mt-0 text-xl font-bold text-gray-600 md:mt-1"),f(D,"class","mb-1"),f(x,"class","mb-0 flex flex-col items-center justify-between px-1"),f(R,"class","mt-1 text-xl font-medium text-gray-600 md:mt-2"),f(Y,"class","mb-1"),f(N,"class","mb-1 flex items-center justify-between px-1 md:items-start"),f(z,"class","mt-1 text-xs font-medium text-gray-600 md:mt-2"),f(L,"class","mb-2"),f(Q,"class","mb-2 flex items-center justify-between h-[6vh] md:items-start"),f(se,"class","!mb-0 text-sm font-bold text-brand-500"),f(xe,"class","flex"),f(te,"class","flex items-center justify-between md:items-center lg:justify-between h-[6vh] "),f(l,"class","h-full w-full"),f(i,"class","!z-5 relative flex flex-col rounded-[20px] max-w-[300px] bg-white bg-clip-border shadow-3xl shadow-shadow-500 w-full !p-4 3xl:p-![18px] undefined"),f(o,"class","flex flex-col justify-center items-center h-[50vh] m-2")},m(le,W){Ze(le,e,W),g(e,n),g(e,r),g(e,s),g(s,o),g(o,i),g(i,l),g(l,a),g(a,c),g(a,d),g(a,u),g(u,v),g(v,m),g(m,y),g(a,w),g(a,b),g(b,_),g(_,p),g(p,P),g(l,k),g(l,x),g(x,D),g(D,I),g(I,j),g(l,T),g(l,N),g(N,Y),g(Y,R),g(R,V),g(l,B),g(l,Q),g(Q,L),g(L,z),g(z,G),g(l,Z),g(l,te),g(te,xe),g(xe,se),g(se,Pe),g(o,oe),g(o,de),_n(re,de,null),_e=!0,we||(U=[pe(u,"click",function(){Nr(t[7](t[4]))&&t[7](t[4]).apply(this,arguments)}),pe(b,"click",t[9])],we=!0)},p(le,[W]){t=le,(!_e||W&1)&&Vt(j,t[0]),(!_e||W&2)&&Vt(V,t[1]),(!_e||W&4)&&Vt(G,t[2]),(!_e||W&8)&&Vt(Pe,t[3]);const H={};W&65567&&(H.$$scope={dirty:W,ctx:t}),!be&&W&64&&(be=!0,H.showModal=t[6],Fr(()=>be=!1)),re.$set(H)},i(le){_e||(Be(re.$$.fragment,le),_e=!0)},o(le){Le(re.$$.fragment,le),_e=!1},d(le){le&&E(e),t[15](null),wn(re),we=!1,gn(U)}}}function xo(t,e,n){let r,s=!1,{category:o}=e,{title:i}=e,{description:l}=e,{date:a}=e,{id:c}=e;async function h(p){try{await Bt.tasks.delete(p)}catch(P){status=`Failed to add ${i}: ${P}`,alert(status)}}async function d(p){try{await Bt.tasks.put({id:p,category:o,title:i,description:l,date:a})}catch(P){status=`Failed to add ${i}: ${P}`,alert(status)}finally{r.close()}}const u=()=>n(6,s=!0);function v(){o=this.value,n(0,o)}function m(){i=this.value,n(1,i)}function y(){l=this.value,n(2,l)}function w(){a=this.value,n(3,a)}function b(p){s=p,n(6,s)}function _(p){Mt[p?"unshift":"push"](()=>{r=p,n(5,r)})}return t.$$set=p=>{"category"in p&&n(0,o=p.category),"title"in p&&n(1,i=p.title),"description"in p&&n(2,l=p.description),"date"in p&&n(3,a=p.date),"id"in p&&n(4,c=p.id)},[o,i,l,a,c,r,s,h,d,u,v,m,y,w,b,_]}class Eo extends pn{constructor(e){super(),mn(this,e,xo,ko,yn,{category:0,title:1,description:2,date:3,id:4})}}function Po(t,e){return new Ps(t,e)}new TextEncoder;function Do(t){let e,n,r,s,o,i,l,a,c,h,d,u,v,m,y,w,b,_,p,P,k,x,D,I,j,T,N,Y,R,V,B,Q,L,z,G,Z,te,xe,se,Pe,oe,de,re,be,_e,we,U,Ke,je,le;return{c(){e=K("div"),n=K("div"),r=J("svg"),s=J("path"),o=J("path"),i=J("path"),l=F(),a=K("h1"),c=ce("Create Task"),h=F(),d=K("label"),u=ce("Category"),v=F(),m=K("input"),y=F(),w=K("label"),b=ce("Title"),_=F(),p=K("input"),P=F(),k=K("label"),x=ce("description"),D=F(),I=K("input"),j=F(),T=K("label"),N=ce("Date"),Y=F(),R=K("div"),V=K("div"),B=J("svg"),Q=J("path"),L=J("rect"),z=J("line"),G=J("line"),Z=J("line"),te=J("rect"),xe=F(),se=K("div"),Pe=F(),oe=K("input"),de=F(),re=K("div"),be=K("button"),_e=ce("Submit"),we=F(),U=K("button"),Ke=ce("Cancel"),this.h()},l(W){e=O(W,"DIV",{class:!0});var H=C(e);n=O(H,"DIV",{class:!0});var Oe=C(n);r=$(Oe,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var De=C(r);s=$(De,"path",{stroke:!0,d:!0}),C(s).forEach(E),o=$(De,"path",{d:!0}),C(o).forEach(E),i=$(De,"path",{d:!0}),C(i).forEach(E),De.forEach(E),l=q(Oe),a=O(Oe,"H1",{class:!0});var Se=C(a);c=he(Se,"Create Task"),Se.forEach(E),Oe.forEach(E),h=q(H),d=O(H,"LABEL",{for:!0,class:!0});var me=C(d);u=he(me,"Category"),me.forEach(E),v=q(H),m=O(H,"INPUT",{id:!0,class:!0,placeholder:!0}),y=q(H),w=O(H,"LABEL",{for:!0,class:!0});var fe=C(w);b=he(fe,"Title"),fe.forEach(E),_=q(H),p=O(H,"INPUT",{id:!0,class:!0,placeholder:!0}),P=q(H),k=O(H,"LABEL",{for:!0,class:!0});var ze=C(k);x=he(ze,"description"),ze.forEach(E),D=q(H),I=O(H,"INPUT",{id:!0,class:!0,placeholder:!0}),j=q(H),T=O(H,"LABEL",{for:!0,class:!0});var We=C(T);N=he(We,"Date"),We.forEach(E),Y=q(H),R=O(H,"DIV",{class:!0});var Re=C(R);V=O(Re,"DIV",{class:!0});var _t=C(V);B=$(_t,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var Ae=C(B);Q=$(Ae,"path",{stroke:!0,d:!0}),C(Q).forEach(E),L=$(Ae,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),C(L).forEach(E),z=$(Ae,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(z).forEach(E),G=$(Ae,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(G).forEach(E),Z=$(Ae,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(Z).forEach(E),te=$(Ae,"rect",{x:!0,y:!0,width:!0,height:!0}),C(te).forEach(E),Ae.forEach(E),_t.forEach(E),xe=q(Re),se=O(Re,"DIV",{});var qt=C(se);qt.forEach(E),Pe=q(Re),oe=O(Re,"INPUT",{id:!0,class:!0,placeholder:!0}),Re.forEach(E),de=q(H),re=O(H,"DIV",{class:!0});var et=C(re);be=O(et,"BUTTON",{class:!0});var wt=C(be);_e=he(wt,"Submit"),wt.forEach(E),we=q(et),U=O(et,"BUTTON",{class:!0});var kt=C(U);Ke=he(kt,"Cancel"),kt.forEach(E),et.forEach(E),H.forEach(E),this.h()},h(){f(s,"stroke","none"),f(s,"d","M0 0h24v24H0z"),f(o,"d","M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12"),f(i,"d","M20 12v4h-4a2 2 0 0 1 0 -4h4"),f(r,"xmlns","http://www.w3.org/2000/svg"),f(r,"class","icon icon-tabler icon-tabler-wallet"),f(r,"width","30"),f(r,"height","30"),f(r,"viewBox","0 0 24 24"),f(r,"stroke-width","1"),f(r,"stroke","currentColor"),f(r,"fill","none"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(a,"class","text-gray-800 font-lg font-bold tracking-normal leading-tight mt-1 ml-2"),f(n,"class","w-full flex justify-start text-green-400"),f(d,"for","category"),f(d,"class","text-gray-800 text-xs font-bold leading-tight tracking-normal"),f(m,"id","category"),f(m,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(m,"placeholder","Required"),f(w,"for","title"),f(w,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(p,"id","title"),f(p,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(p,"placeholder","Required"),f(k,"for","description"),f(k,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(I,"id","description"),f(I,"class","mb-2 mt-2 text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(I,"placeholder","Optional"),f(T,"for","date"),f(T,"class","text-gray-800 text-sm font-bold leading-tight tracking-normal"),f(Q,"stroke","none"),f(Q,"d","M0 0h24v24H0z"),f(L,"x","4"),f(L,"y","5"),f(L,"width","16"),f(L,"height","16"),f(L,"rx","2"),f(z,"x1","16"),f(z,"y1","3"),f(z,"x2","16"),f(z,"y2","7"),f(G,"x1","8"),f(G,"y1","3"),f(G,"x2","8"),f(G,"y2","7"),f(Z,"x1","4"),f(Z,"y1","11"),f(Z,"x2","20"),f(Z,"y2","11"),f(te,"x","8"),f(te,"y","15"),f(te,"width","2"),f(te,"height","2"),f(B,"xmlns","http://www.w3.org/2000/svg"),f(B,"class","icon icon-tabler icon-tabler-calendar-event"),f(B,"width","20"),f(B,"height","20"),f(B,"viewBox","0 0 24 24"),f(B,"stroke-width","1.5"),f(B,"stroke","currentColor"),f(B,"fill","none"),f(B,"stroke-linecap","round"),f(B,"stroke-linejoin","round"),f(V,"class","absolute right-0 text-gray-600 flex items-center pr-3 h-full cursor-pointer"),f(oe,"id","date"),f(oe,"class","text-gray-600 focus:outline-none focus:border focus:border-indigo-700 font-normal w-full h-10 flex items-center pl-3 text-sm border-gray-300 rounded border"),f(oe,"placeholder","DD/MM/YYYY"),f(R,"class","relative mb-2 mt-2"),f(be,"class","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 transition duration-150 ease-in-out hover:bg-indigo-600 bg-indigo-700 rounded text-white px-8 py-2 text-sm mr-1"),f(U,"class","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-700 transition duration-150 ease-in-out hover:bg-red-600 bg-red-700 rounded text-white px-8 py-2 text-sm"),f(re,"class","flex items-center justify-start w-full"),f(e,"class","relative py-1 px-16 bg-white shadow-md rounded border border-neutral-950")},m(W,H){Ze(W,e,H),g(e,n),g(n,r),g(r,s),g(r,o),g(r,i),g(n,l),g(n,a),g(a,c),g(e,h),g(e,d),g(d,u),g(e,v),g(e,m),ye(m,t[0]),g(e,y),g(e,w),g(w,b),g(e,_),g(e,p),ye(p,t[1]),g(e,P),g(e,k),g(k,x),g(e,D),g(e,I),ye(I,t[2]),g(e,j),g(e,T),g(T,N),g(e,Y),g(e,R),g(R,V),g(V,B),g(B,Q),g(B,L),g(B,z),g(B,G),g(B,Z),g(B,te),g(R,xe),g(R,se),g(R,Pe),g(R,oe),ye(oe,t[3]),g(e,de),g(e,re),g(re,be),g(be,_e),g(re,we),g(re,U),g(U,Ke),je||(le=[pe(m,"input",t[8]),pe(p,"input",t[9]),pe(I,"input",t[10]),pe(oe,"input",t[11]),pe(be,"click",t[12]),pe(U,"click",t[13])],je=!0)},p(W,H){H&1&&m.value!==W[0]&&ye(m,W[0]),H&2&&p.value!==W[1]&&ye(p,W[1]),H&4&&I.value!==W[2]&&ye(I,W[2]),H&8&&oe.value!==W[3]&&ye(oe,W[3])},d(W){W&&E(e),je=!1,gn(le)}}}function Co(t){let e,n,r,s,o,i,l,a,c,h,d,u,v,m,y,w,b,_;function p(k){t[14](k)}let P={$$slots:{default:[Do]},$$scope:{ctx:t}};return t[4]!==void 0&&(P.showModal=t[4]),m=new vs({props:P}),Mt.push(()=>Rr(m,"showModal",p)),t[15](m),{c(){e=K("html"),n=K("head"),r=F(),s=K("body"),o=K("script"),l=F(),a=K("div"),c=K("button"),h=ce(`Create Task !\r
            `),d=K("div"),u=F(),v=K("div"),vn(m.$$.fragment),this.h()},l(k){e=O(k,"HTML",{});var x=C(e);n=O(x,"HEAD",{});var D=C(n);D.forEach(E),r=q(x),s=O(x,"BODY",{});var I=C(s);o=O(I,"SCRIPT",{src:!0});var j=C(o);j.forEach(E),l=q(I),a=O(I,"DIV",{class:!0});var T=C(a);c=O(T,"BUTTON",{class:!0});var N=C(c);h=he(N,`Create Task !\r
            `),d=O(N,"DIV",{class:!0});var Y=C(d);Y.forEach(E),N.forEach(E),T.forEach(E),u=q(I),v=O(I,"DIV",{});var R=C(v);bn(m.$$.fragment,R),R.forEach(E),I.forEach(E),x.forEach(E),this.h()},h(){nn(o.src,i="../../node_modules/tw-elements/dist/js/index.min.js")||f(o,"src",i),f(d,"class","absolute duration-300 inset-0 w-full h-full transition-all scale-0 group-hover:scale-100 group-hover:bg-white/30 rounded-2xl"),f(c,"class","group rounded-2xl h-12 w-48 bg-green-500 font-bold text-lg text-white relative overflow-hidden"),f(a,"class","flex flex-col items-center h-[10vh] m-4")},m(k,x){Ze(k,e,x),g(e,n),g(e,r),g(e,s),g(s,o),g(s,l),g(s,a),g(a,c),g(c,h),g(c,d),g(s,u),g(s,v),_n(m,v,null),w=!0,b||(_=pe(c,"click",t[7]),b=!0)},p(k,[x]){const D={};x&65583&&(D.$$scope={dirty:x,ctx:k}),!y&&x&16&&(y=!0,D.showModal=k[4],Fr(()=>y=!1)),m.$set(D)},i(k){w||(Be(m.$$.fragment,k),w=!0)},o(k){Le(m.$$.fragment,k),w=!1},d(k){k&&E(e),t[15](null),wn(m),b=!1,_()}}}function Io(t,e,n){let r=!1,s,{category:o=""}=e,{title:i=""}=e,{description:l=""}=e,{date:a=""}=e;async function c(){try{if(o==""||i=="")throw Po(422,{message:"Please, Insert Missing Field",code:"422"});const p=await Bt.tasks.add({category:o,title:i,description:l,date:a})}catch(p){status=`Failed to add ${i}: ${p}`,alert(p.body.message)}finally{s.close(),n(0,o=""),n(1,i=""),n(2,l=""),n(3,a="")}}const h=()=>n(4,r=!0);function d(){o=this.value,n(0,o)}function u(){i=this.value,n(1,i)}function v(){l=this.value,n(2,l)}function m(){a=this.value,n(3,a)}const y=()=>c(),w=()=>s.close();function b(p){r=p,n(4,r)}function _(p){Mt[p?"unshift":"push"](()=>{s=p,n(5,s)})}return t.$$set=p=>{"category"in p&&n(0,o=p.category),"title"in p&&n(1,i=p.title),"description"in p&&n(2,l=p.description),"date"in p&&n(3,a=p.date)},[o,i,l,a,r,s,c,h,d,u,v,m,y,w,b,_]}class jo extends pn{constructor(e){super(),mn(this,e,Io,Co,yn,{category:0,title:1,description:2,date:3})}}function Tr(t,e,n){const r=t.slice();return r[2]=e[n],r}function Br(t){let e=[],n=new Map,r,s,o=t[0];const i=l=>l[2].id;for(let l=0;l<o.length;l+=1){let a=Tr(t,o,l),c=i(a);n.set(c,e[l]=Mr(c,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();r=rn()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);r=rn()},m(l,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,a);Ze(l,r,a),s=!0},p(l,a){a&1&&(o=l[0],Vr(),e=xs(e,a,i,1,l,o,n,r.parentNode,Es,Mr,r,Tr),qr())},i(l){if(!s){for(let a=0;a<o.length;a+=1)Be(e[a]);s=!0}},o(l){for(let a=0;a<e.length;a+=1)Le(e[a]);s=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&E(r)}}}function Mr(t,e){let n,r,s;return r=new Eo({props:{category:e[2].category,title:e[2].title,date:e[2].date,id:e[2].id,description:e[2].description}}),{key:t,first:null,c(){n=rn(),vn(r.$$.fragment),this.h()},l(o){n=rn(),bn(r.$$.fragment,o),this.h()},h(){this.first=n},m(o,i){Ze(o,n,i),_n(r,o,i),s=!0},p(o,i){e=o;const l={};i&1&&(l.category=e[2].category),i&1&&(l.title=e[2].title),i&1&&(l.date=e[2].date),i&1&&(l.id=e[2].id),i&1&&(l.description=e[2].description),r.$set(l)},i(o){s||(Be(r.$$.fragment,o),s=!0)},o(o){Le(r.$$.fragment,o),s=!1},d(o){o&&E(n),wn(r,o)}}}function Ko(t){let e,n,r,s,o,i,l,a,c,h,d,u,v,m,y,w,b,_;h=new jo({});let p=t[0]&&Br(t);return{c(){e=K("html"),n=K("head"),r=K("script"),o=F(),i=K("link"),l=F(),a=K("body"),c=K("div"),vn(h.$$.fragment),d=F(),u=K("div"),v=K("div"),m=K("div"),p&&p.c(),y=F(),w=K("script"),this.h()},l(P){e=O(P,"HTML",{});var k=C(e);n=O(k,"HEAD",{});var x=C(n);r=O(x,"SCRIPT",{src:!0});var D=C(r);D.forEach(E),o=q(x),i=O(x,"LINK",{href:!0,rel:!0}),x.forEach(E),l=q(k),a=O(k,"BODY",{});var I=C(a);c=O(I,"DIV",{});var j=C(c);bn(h.$$.fragment,j),d=q(j),u=O(j,"DIV",{});var T=C(u);v=O(T,"DIV",{class:!0});var N=C(v);m=O(N,"DIV",{class:!0});var Y=C(m);p&&p.l(Y),Y.forEach(E),N.forEach(E),T.forEach(E),j.forEach(E),y=q(I),w=O(I,"SCRIPT",{src:!0});var R=C(w);R.forEach(E),I.forEach(E),k.forEach(E),this.h()},h(){nn(r.src,s="https://cdn.tailwindcss.com")||f(r,"src",s),f(i,"href","https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.4/flowbite.min.css"),f(i,"rel","stylesheet"),f(m,"class","grid grid-flow text-neutral-600 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 "),f(v,"class","bg-blue-100 bg-clip-border w-full m-5"),nn(w.src,b="../../node_modules/tw-elements/dist/js/index.min.js")||f(w,"src",b)},m(P,k){Ze(P,e,k),g(e,n),g(n,r),g(n,o),g(n,i),g(e,l),g(e,a),g(a,c),_n(h,c,null),g(c,d),g(c,u),g(u,v),g(v,m),p&&p.m(m,null),g(a,y),g(a,w),_=!0},p(P,[k]){P[0]?p?(p.p(P,k),k&1&&Be(p,1)):(p=Br(P),p.c(),Be(p,1),p.m(m,null)):p&&(Vr(),Le(p,1,1,()=>{p=null}),qr())},i(P){_||(Be(h.$$.fragment,P),Be(p),_=!0)},o(P){Le(h.$$.fragment,P),Le(p),_=!1},d(P){P&&E(e),wn(h),p&&p.d()}}}function Oo(t,e,n){let r,s=gs(()=>Bt.tasks.toArray());return ks(t,s,o=>n(0,r=o)),[r,s]}class To extends pn{constructor(e){super(),mn(this,e,Oo,Ko,yn,{})}}export{To as default};
